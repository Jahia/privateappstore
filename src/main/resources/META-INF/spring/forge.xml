<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean class="org.jahia.modules.forge.actions.CreateModuleFromJar" >
        <property name="name" value="CreateModuleFromJar"/>
        <property name="requireAuthenticatedUser" value="true"/>
        <property name="requiredPermission" value="jahiaForgeUploadModule"/>
        <property name="templateManagerService" ref="JahiaTemplateManagerService"/>
    </bean>

    <bean class="org.jahia.modules.forge.actions.DeleteModule" >
        <property name="name" value="DeleteModule"/>
        <property name="requireAuthenticatedUser" value="true"/>
    </bean>

    <bean class="org.jahia.modules.forge.actions.PublishModule" >
        <property name="name" value="PublishModule"/>
        <property name="requireAuthenticatedUser" value="true"/>
    </bean>


    <bean class="org.jahia.modules.forge.actions.EditModuleVersion" >
        <property name="name" value="EditModuleVersion"/>
        <property name="requireAuthenticatedUser" value="true"/>
    </bean>

    <bean class="org.jahia.modules.forge.actions.AddVideo" >
        <property name="name" value="AddVideo"/>
        <property name="requireAuthenticatedUser" value="true"/>
    </bean>

    <bean class="org.jahia.modules.forge.actions.EditVideo" >
        <property name="name" value="EditVideo"/>
        <property name="requireAuthenticatedUser" value="true"/>
    </bean>

    <bean class="org.jahia.modules.forge.actions.EditTags" >
        <property name="name" value="EditTags"/>
        <property name="taggingService" ref="org.jahia.services.tags.TaggingService"/>
        <property name="requireAuthenticatedUser" value="true"/>
    </bean>

    <bean class="org.jahia.modules.forge.actions.CalculateCompletion" >
        <property name="name" value="CalculateCompletion"/>
        <property name="requireAuthenticatedUser" value="true"/>
    </bean>

    <bean class="org.jahia.modules.forge.actions.DownloadCount" >
        <property name="name" value="DownloadCount"/>
        <property name="requireAuthenticatedUser" value="false"/>
    </bean>

    <bean class="org.jahia.modules.forge.actions.AddReview" >
        <property name="name" value="AddReview"/>
        <property name="requireAuthenticatedUser" value="false"/>
    </bean>

    <bean class="org.jahia.modules.forge.actions.ReplyReview" >
        <property name="name" value="ReplyReview"/>
        <property name="requireAuthenticatedUser" value="true"/>
    </bean>

    <bean class="org.jahia.modules.forge.actions.ReportReview" >
        <property name="name" value="ReportReview"/>
        <property name="requireAuthenticatedUser" value="true"/>
        <property name="templatePath" value="/mails/templates/reportedReviewNotification.vm"/>
        <property name="mailService" ref="MailService"/>
    </bean>

    <bean class="org.jahia.modules.forge.actions.UnjustifiedReport" >
        <property name="name" value="UnjustifiedReport"/>
        <property name="requireAuthenticatedUser" value="true"/>
    </bean>

    <bean class="org.jahia.modules.forge.actions.DeleteReview" >
        <property name="name" value="DeleteReview"/>
        <property name="requireAuthenticatedUser" value="true"/>
    </bean>

    <bean class="org.jahia.modules.forge.actions.UpdateModuleIcon" >
        <property name="name" value="UpdateModuleIcon"/>
        <property name="requireAuthenticatedUser" value="true"/>
        <property name="requiredPermission" value="jcr:write"/>
        <property name="imageService" ref="imageService"/>
    </bean>

    <bean name="mavenProxyController" class="org.jahia.modules.forge.proxy.MavenProxy">
        <!--<property name="httpClientService" value="HttpClientService"/>-->
    </bean>
    <bean name="mavenProxyMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="urlMap">
            <map>
                <entry key="/mavenproxy/**" value-ref="mavenProxyController"/>
            </map>
        </property>
    </bean>

    <bean id="forgePublishedModule" class="org.jahia.modules.forge.filters.PublishedModuleFilter">
        <property name="priority" value="20"/>
        <property name="applyOnModes" value="live"/>
        <property name="applyOnNodeTypes" value="jnt:forgeModule"/>
    </bean>
</beans>